# رابط کاربری پیشرفته برای سیستم هوش تجاری Hitachi Pentaho

## معرفی
این پروژه یک رابط کاربری (UI) مدرن و پیشرفته برای سیستم هوش تجاری (BI) Hitachi Pentaho است. هدف اصلی، ارائه یک تجربه کاربری بهتر، داشبوردهای تعاملی و ابزارهای تحلیلی پیشرفته برای استفاده از قدرت Pentaho در صنعت معدن، فولاد و دیگر صنایع است. این رابط کاربری با بهره‌گیری از فناوری‌های نوین وب، امکان تجسم داده‌ها، گزارش‌گیری پیشرفته و تحلیل عمیق‌تر را فراهم می‌کند.

## ویژگی‌های اصلی

### داشبوردهای تحلیلی
- داشبوردهای تعاملی با نمودارهای پیشرفته و قابل سفارشی‌سازی
- نمایش گرافیکی شاخص‌های کلیدی عملکرد (KPI) با امکان هشدار خودکار
- امکان شخصی‌سازی نماها بر اساس نیاز کاربر و سطح دسترسی
- نمودارهای پیشرفته با قابلیت درگ-اند-دراپ و فیلترینگ آنی

### تحلیل‌های مالی
- ارائه گزارش‌های مالی پیشرفته با دید چندبعدی
- تحلیل هزینه‌های تولید و سربار با قابلیت مقایسه دوره‌ای
- محاسبه دقیق قیمت تمام شده محصولات با تفکیک عوامل هزینه
- تحلیل روند‌های مالی و پیش‌بینی‌های هوشمند مبتنی بر داده‌های تاریخی

### مانیتورینگ تولید و عملیات
- نمایش وضعیت فرآیندهای تولید به صورت زنده
- مانیتورینگ موجودی مواد اولیه و محصولات با نمودارهای جریان
- هشدارهای هوشمند برای سطوح بحرانی با امکان تعریف آستانه‌های سفارشی
- تحلیل کارایی و بهره‌وری خطوط تولید با تمرکز بر نقاط بهبود

### یکپارچه‌سازی با Hitachi Pentaho
- اتصال مستقیم به موتور تحلیلی Pentaho با استفاده از APIs استاندارد
- استفاده از قابلیت‌های ETL پنتاهو برای پاکسازی و آماده‌سازی خودکار داده‌ها
- بهره‌گیری از گزارشات پیش‌ساخته Pentaho با ظاهری مدرن و فارسی
- ارتقای رابط کاربری برای دسترسی آسان‌تر به قابلیت‌های پیچیده پنتاهو

## تکنولوژی‌ها

### فرانت‌اند
- **Flask**: فریم‌ورک سبک و قدرتمند پایتون برای ایجاد رابط کاربری
- **Bootstrap 5**: کتابخانه طراحی ظاهری ریسپانسیو
- **D3.js**: کتابخانه قدرتمند برای ساخت نمودارهای تعاملی پیچیده
- **Plotly**: نمودارهای تعاملی و داشبوردهای علمی
- **i18next**: پشتیبانی چند زبانه با تمرکز بر فارسی

### بک‌اند
- **Python 3**: زبان اصلی پشت سرور
- **Flask-RESTful**: توسعه API برای اتصال به سرویس‌های Pentaho
- **Pentaho API**: ارتباط با سیستم هوش تجاری Hitachi Pentaho
- **SQLAlchemy**: ارتباط با انواع پایگاه‌های داده‌ای

## راهنمای راه‌اندازی

### پیش‌نیازها
- Python 3.8 یا بالاتر
- سیستم Hitachi Pentaho نصب شده و فعال
- JDK 8 برای اجرای سرویس‌های پنتاهو

### راه‌اندازی سرور پنتاهو

1. ابتدا به پوشه pentaho-server بروید:
```bash
E:
cd E:\Repsitory\Pentaho\pentaho-server
```

2. اجرای اسکریپت راه‌اندازی:
```bash
start-pentaho.bat
```

سرور پنتاهو در آدرس http://localhost:8080/pentaho در دسترس خواهد بود.

### راه‌اندازی رابط کاربری

1. به پوشه xray-global-ui بروید:
```bash
E:
cd E:\Repsitory\Pentaho\xray-global-ui
```

2. ایجاد و فعال‌سازی محیط مجازی پایتون:
```bash
python -m venv .venv
.venv\Scripts\activate
```

3. نصب وابستگی‌ها:
```bash
pip install -r requirements.txt
```

4. تنظیم فایل .env:
اطمینان حاصل کنید که فایل .env با مقادیر مناسب پیکربندی شده است، به خصوص آدرس و مشخصات دسترسی به سرور Pentaho.

5. راه‌اندازی برنامه:
```bash
python app.py
```

رابط کاربری پیشرفته در آدرس http://localhost:5000 در دسترس خواهد بود.

## ساختار پروژه

### سرور پنتاهو
```
pentaho-server/
├── start-pentaho.bat    # اسکریپت راه‌اندازی سرور پنتاهو
├── stop-pentaho.bat     # اسکریپت توقف سرور پنتاهو
├── pentaho-solutions/   # فایل‌های راه‌حل پنتاهو
│   ├── system/          # تنظیمات سیستمی
│   ├── admin/           # تنظیمات مدیریتی
│   └── steel/           # راه‌حل‌های سفارشی صنعت فولاد
├── tomcat/              # سرور وب تامکت
├── data/                # پایگاه‌های داده داخلی 
└── licenses/            # فایل‌های مجوز
```

### رابط کاربری
```
xray-global-ui/
├── app.py               # فایل اصلی برنامه فلسک
├── .env                 # تنظیمات محیطی
├── requirements.txt     # وابستگی‌های پایتون
├── static/              # فایل‌های استاتیک
│   ├── css/             # استایل‌شیت‌ها
│   ├── js/              # اسکریپت‌های جاوااسکریپت
│   └── images/          # تصاویر
├── templates/           # قالب‌های HTML
│   ├── index.html       # صفحه ورود
│   ├── dashboard.html   # داشبورد اصلی
│   ├── sales.html       # تحلیل فروش
│   ├── production.html  # مانیتورینگ تولید
│   └── accounting.html  # گزارشات مالی
├── data/                # داده‌های آماده‌سازی شده
└── docs/                # مستندات
```

## ارتباط با سیستم Pentaho

این رابط کاربری از طریق API‌های استاندارد با سیستم Hitachi Pentaho ارتباط برقرار می‌کند و قابلیت‌های زیر را ارائه می‌دهد:

- **اجرای گزارشات**: دسترسی و اجرای گزارشات طراحی شده در Pentaho Report Designer
- **داشبوردهای پیشرفته**: ارتقای داشبوردهای Pentaho با ظاهری مدرن‌تر و متناسب با فرهنگ کاربری بومی
- **تحلیل چندبعدی**: اجرای کوئری‌های Mondrian OLAP با رابط کاربری ساده‌تر
- **پردازش داده**: نمایش نتایج فرآیندهای ETL و امکان اجرای مجدد آن‌ها
- **داده‌کاوی**: استفاده از قابلیت‌های داده‌کاوی Pentaho با نمایش نتایج بصری و سفارشی

## ابزارهای تخصصی

### موتور تحلیل پیشرفته
سیستم از موتور تحلیلی قدرتمند بهره می‌برد که امکان استخراج داده‌های تاریخی، تحلیل روندها، و پیش‌بینی مقادیر آینده را فراهم می‌کند:

- **تحلیل روند**: بررسی روندهای دوره‌ای و فصلی در داده‌های تولید و فروش
- **تشخیص ناهنجاری**: شناسایی خودکار مقادیر غیرعادی و هشدار به کاربران
- **پیش‌بینی تولید**: استفاده از الگوریتم‌های یادگیری ماشین برای پیش‌بینی حجم تولید
- **مدل‌سازی قیمت**: پیش‌بینی تغییرات قیمت مواد اولیه و محصولات

### گزارش‌ساز حرفه‌ای
سیستم دارای یک گزارش‌ساز درگ-اند-دراپ است که به کاربران امکان می‌دهد بدون نیاز به دانش فنی، گزارشات سفارشی خود را ایجاد کنند:

- **قالب‌های آماده**: دسترسی به قالب‌های متنوع برای انواع گزارشات صنعتی
- **جداول پویا**: امکان ایجاد جداول پیشرفته با قابلیت محاسبات درجا
- **صادرات چندفرمتی**: امکان صدور گزارشات در قالب‌های PDF، Excel، CSV و HTML
- **زمان‌بندی گزارشات**: تنظیم زمان‌بندی برای تولید و ارسال خودکار گزارشات

## کاربران و دسترسی‌ها

سیستم از سطوح دسترسی تعریف شده در Pentaho استفاده می‌کند:

- **مدیران ارشد**: دسترسی به تمامی بخش‌های سیستم و گزارشات مدیریتی
- **تحلیلگران داده**: دسترسی به ابزارهای تحلیلی و داشبوردها
- **کاربران تجاری**: دسترسی به گزارشات و داشبوردهای مرتبط با حوزه کاری
- **توسعه‌دهندگان**: امکان ایجاد گزارشات جدید و تنظیم داشبوردها

## پشتیبان‌گیری

برای پشتیبان‌گیری از داده‌ها و تنظیمات می‌توانید از اسکریپت‌های زیر استفاده کنید:

```bash
# پشتیبان‌گیری از تنظیمات رابط کاربری
E:
cd E:\Repsitory\Pentaho\xray-global-ui
python backup.py

# پشتیبان‌گیری از فایل‌های پنتاهو
E:
cd E:\Repsitory\Pentaho\pentaho-server
.\Backup-SQL\backup.bat
```

توجه داشته باشید که برای پشتیبان‌گیری کامل، باید هم از داده‌های رابط کاربری و هم از داده‌های اصلی سرور پنتاهو پشتیبان‌گیری شود.

## توسعه آینده
- افزودن قابلیت‌های هوش مصنوعی برای تحلیل پیشرفته‌تر داده‌ها و پیش‌بینی خودکار
- ایجاد اپلیکیشن موبایل برای دسترسی به داشبوردها از طریق تلفن همراه
- پیاده‌سازی قابلیت‌های هشدار پیشرفته با پشتیبانی از اعلان‌های چندکاناله
- توسعه ماژول‌های تخصصی برای صنایع مختلف و نیازهای خاص
- افزودن قابلیت‌های همکاری گروهی برای کار تیمی روی گزارشات و تحلیل‌ها
